"use strict";(self.webpackChunkproject_management_app=self.webpackChunkproject_management_app||[]).push([[3],{8003:(ot,g,o)=>{o.r(g),o.d(g,{EditUserModule:()=>nt});var f=o(6895),i=o(4006),Z=o(529),h=o(6582),C=o(9790),T=o(8505),x=o(5412),O=o(7192),c=o(6882),M=o(4616),_=o(3714),E=o(8379),t=o(4650),I=o(5307),P=o(9653),N=o(977),v=o(9066),m=o(9549),b=o(284),F=o(4859),L=o(7392),J=o(3372),q=o(6368);function y(e,a){1&e&&(t.TgZ(0,"div",4),t._UZ(1,"app-loading-spinner"),t.qZA())}function H(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.firstName.validation.error1")))}function S(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.firstName.validation.error2")))}function Q(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.lastName.validation.error1")))}function Y(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.lastName.validation.error2")))}function j(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.email.validation.error1")))}function R(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.email.validation.error2")))}function D(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.color.error")," "))}function G(e,a){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"AUTH.password.validation.error1")))}function $(e,a){1&e&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.password.validation.error2"),""))}function k(e,a){1&e&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.password.validation.error3"),""))}function K(e,a){1&e&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.password.validation.error4"),""))}function z(e,a){1&e&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.password.validation.error5"),""))}function B(e,a){1&e&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"AUTH.password.validation.error6"),""))}function X(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"translate"),t.YNc(3,$,3,3,"span",28),t.YNc(4,k,3,3,"span",28),t.YNc(5,K,3,3,"span",28),t.YNc(6,z,3,3,"span",28),t.YNc(7,B,3,3,"span",28),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij("",t.lcZ(2,6,"AUTH.password.validation.common")," "),t.xp6(2),t.Q6J("ngIf","uppercase"===n.validationService.passwordHasErrors(n.editForm)),t.xp6(1),t.Q6J("ngIf","lowercase"===n.validationService.passwordHasErrors(n.editForm)),t.xp6(1),t.Q6J("ngIf","number"===n.validationService.passwordHasErrors(n.editForm)),t.xp6(1),t.Q6J("ngIf","specialChar"===n.validationService.passwordHasErrors(n.editForm)),t.xp6(1),t.Q6J("ngIf","length"===n.validationService.passwordHasErrors(n.editForm))}}const V=function(e){return{"background-color":e}};function W(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"form",5),t.NdJ("ngSubmit",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.onSaveChanges())}),t.TgZ(1,"mat-form-field",6)(2,"mat-label",7),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",8),t.ALo(6,"translate"),t.YNc(7,H,3,3,"mat-error",9),t.YNc(8,S,3,3,"mat-error",9),t.qZA(),t.TgZ(9,"mat-form-field",6)(10,"mat-label",7),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._UZ(13,"input",10),t.ALo(14,"translate"),t.YNc(15,Q,3,3,"mat-error",9),t.YNc(16,Y,3,3,"mat-error",9),t.qZA(),t.TgZ(17,"mat-form-field",6)(18,"mat-label",7),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",11),t.ALo(22,"translate"),t.YNc(23,j,3,3,"mat-error",9),t.YNc(24,R,3,3,"mat-error",9),t.qZA(),t.TgZ(25,"div",12)(26,"mat-form-field",13)(27,"mat-label",7),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",14)(31,"ngx-mat-color-toggle",15)(32,"ngx-mat-color-picker",16,17),t.YNc(34,D,3,3,"mat-error",9),t.qZA(),t.TgZ(35,"div",18)(36,"p",19),t._uU(37),t.ALo(38,"initials"),t.qZA()()(),t.TgZ(39,"div",20)(40,"p"),t._uU(41),t.ALo(42,"translate"),t.qZA()(),t.TgZ(43,"mat-form-field",21)(44,"mat-label",7),t._uU(45),t.ALo(46,"translate"),t.qZA(),t._UZ(47,"input",22),t.ALo(48,"translate"),t.TgZ(49,"mat-icon",23),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.hidePassword=!s.hidePassword)}),t._uU(50),t.qZA(),t.TgZ(51,"mat-hint",24),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.YNc(54,G,3,3,"mat-error",9),t.YNc(55,X,8,8,"mat-error",9),t.qZA(),t.TgZ(56,"div",25)(57,"button",26),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"button",27),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.onDeleteUser())}),t._uU(61),t.ALo(62,"translate"),t.qZA()()()}if(2&e){const n=t.MAs(33),r=t.oxw();let s,l,d,U,A,w,p,u;t.Q6J("formGroup",r.editForm),t.xp6(3),t.Oqu(t.lcZ(4,32,"AUTH.firstName.value")),t.xp6(2),t.Q6J("placeholder",t.lcZ(6,34,"AUTH.firstName.value")),t.xp6(2),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"firstName","required")&&(null==(s=r.editForm.get("firstName"))?null:s.touched)),t.xp6(1),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"firstName","minlength")&&(null==(l=r.editForm.get("firstName"))?null:l.touched)),t.xp6(3),t.Oqu(t.lcZ(12,36,"AUTH.lastName.value")),t.xp6(2),t.Q6J("placeholder",t.lcZ(14,38,"AUTH.lastName.value")),t.xp6(2),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"lastName","required")&&(null==(d=r.editForm.get("firstName"))?null:d.touched)),t.xp6(1),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"lastName","minlength")&&(null==(U=r.editForm.get("firstName"))?null:U.touched)),t.xp6(3),t.Oqu(t.lcZ(20,40,"AUTH.email.value")),t.xp6(2),t.Q6J("placeholder",t.lcZ(22,42,"AUTH.email.value")),t.xp6(2),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"email","required")&&(null==(A=r.editForm.get("email"))?null:A.touched)),t.xp6(1),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"email","email")&&(null==(w=r.editForm.get("email"))?null:w.touched)),t.xp6(4),t.Oqu(t.lcZ(29,44,"AUTH.color.label")),t.xp6(2),t.Q6J("ngxMatColorPicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(1),t.Q6J("touchUi",r.touchUi)("color",r.color),t.xp6(2),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"color","required")&&(null==(p=r.editForm.get("color"))?null:p.touched)||r.validationService.hasError(r.editForm,"color","pattern")&&(null==(p=r.editForm.get("color"))?null:p.touched)),t.xp6(1),t.Q6J("ngStyle",t.VKq(60,V,r.editForm.value.color)),t.xp6(2),t.hij(" ",t.lcZ(38,46,r.editForm.value.firstName+" "+r.editForm.value.lastName)," "),t.xp6(4),t.hij(" ",t.lcZ(42,48,"EDIT_USER.passwordDisclaimer")," "),t.xp6(4),t.Oqu(t.lcZ(46,50,"AUTH.password.value")),t.xp6(2),t.Q6J("type",r.hidePassword?"password":"text")("placeholder",t.lcZ(48,52,"AUTH.password.value")),t.xp6(3),t.Oqu(r.hidePassword?"visibility_off":"visibility"),t.xp6(2),t.Oqu(t.lcZ(53,54,"AUTH.password.hint")),t.xp6(2),t.Q6J("ngIf",r.validationService.hasError(r.editForm,"password","required")),t.xp6(1),t.Q6J("ngIf",!(null!=(u=r.editForm.get("password"))&&u.valid)&&(null==(u=r.editForm.get("password"))?null:u.touched)),t.xp6(2),t.Q6J("disabled",!r.editForm.valid),t.xp6(1),t.hij(" ",t.lcZ(59,56,"EDIT_USER.buttons.save")," "),t.xp6(3),t.hij(" ",t.lcZ(62,58,"EDIT_USER.buttons.delete")," ")}}const tt=[{path:"",component:(()=>{class e{constructor(n,r,s,l,d){this.validationService=n,this.store=r,this.showAlertService=s,this.dialog=l,this.translate=d,this.currentUser={login:"",token:"",name:"",userId:"",color:""},this.editForm=new i.cw({}),this.hidePassword=!0,this.error=null,this.isLoading=!1,this.color="primary",this.touchUi=!0,this.auth$=this.store.select(M._9)}ngOnInit(){this.authSub=this.auth$.pipe((0,T.b)(n=>{this.currentUser.login=n.user?.login,this.currentUser.name=n.user?.name,this.currentUser.userId=n.user?.userId,this.currentUser.color=n.user?.color,this.error=n.errorMessage,this.isLoading=n.loading,this.error&&this.showErrorAlert(this.error)})).subscribe(()=>{if(this.currentUser.login){const n=this.hexToRgbA(this.currentUser.color);this.editForm=new i.cw({firstName:new i.NI(this.currentUser.name.split(" ")[0],[i.kI.required,i.kI.minLength(2)]),lastName:new i.NI(this.currentUser.name.split(" ")[1],[i.kI.required,i.kI.minLength(2)]),email:new i.NI(this.currentUser.login,[i.kI.required,i.kI.email]),password:new i.NI(null,[i.kI.required,this.validationService.passwordValidator.bind(this)]),color:new i.NI(new c.Il(n.r,n.g,n.b,n.a),[i.kI.required,i.kI.pattern(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)])})}})}ngOnDestroy(){this.authSub&&this.authSub.unsubscribe()}deleteUserDialog(n){const r=new x.vA;r.disableClose=!0,r.autoFocus=!0,this.translate.get("EDIT_USER.confirmDialog").subscribe(l=>{r.data={message:l.message,confirmText:l.confirmText,cancelText:l.cancelText}}),this.dialog.open(O.z,r).afterClosed().subscribe(l=>{l&&this.store.dispatch(_.g4({userId:n}))})}onSaveChanges(){const n=`${this.editForm.value.firstName} ${this.editForm.value.lastName}`,r=this.editForm.value.email,{password:s}=this.editForm.value,{userId:l}=this.currentUser;this.store.dispatch(_.Cq({name:n,login:r,password:s,userId:l,color:`#${this.editForm.value.color.hex}`})),this.editForm.controls.password.reset()}onHandleError(){this.store.dispatch(E.fw())}onDeleteUser(){this.deleteUserDialog(this.currentUser.userId)}showErrorAlert(n){this.showAlertService.showAlert(n)}hexToRgbA(n){return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(I.R),t.Y36(P.yh),t.Y36(N.M),t.Y36(x.uw),t.Y36(v.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-user"]],decls:6,vars:5,consts:[[1,"container"],[1,"edit-user-header"],["class","spinner-container",4,"ngIf"],["class","edit-form",3,"formGroup","ngSubmit",4,"ngIf"],[1,"spinner-container"],[1,"edit-form",3,"formGroup","ngSubmit"],["floatLabel","auto","appearance","outline",1,"edit-field"],[1,"edit-label"],["type","text","id","first-name","formControlName","firstName","matInput","","name","first-name",3,"placeholder"],[4,"ngIf"],["type","text","id","last-name","formControlName","lastName","matInput","","name","last-name",3,"placeholder"],["type","email","id","email","formControlName","email","matInput","","name","email",3,"placeholder"],[1,"color-field-wrapper"],["floatLabel","auto","appearance","outline",1,"edit-field","color-field"],["matInput","","formControlName","color",3,"ngxMatColorPicker"],["matSuffix","",3,"for"],[3,"touchUi","color"],["picker",""],[1,"avatar-preview",3,"ngStyle"],[1,"avatar-initials"],[1,"hint"],["floatLabel","auto","appearance","outline",1,"edit-field","password-field"],["id","password","formControlName","password","matInput","","name","password",1,"edit-input",3,"type","placeholder"],["matSuffix","",3,"click"],["align","start",1,"password-hint"],[1,"buttons-container"],["type","submit","mat-stroked-button","","color","primary",1,"button","save-button",3,"disabled"],["type","button","mat-stroked-button","","color","danger",1,"button","delete-button","danger-btn",3,"click"],["class","err-span",4,"ngIf"],[1,"err-span"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,y,2,0,"div",2),t.YNc(5,W,63,62,"form",3),t.qZA()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,3,"EDIT_USER.header")),t.xp6(2),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("ngIf",!r.isLoading))},dependencies:[f.O5,f.PC,m.TO,m.KE,m.bx,m.hX,m.R9,b.Nt,F.lW,L.Hw,J.g,c.p2,c._f,c._C,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,v.X$,q.J],styles:["[_nghost-%COMP%]{min-height:calc(100% - 200px)}@media (min-width: 320px) and (max-width: 449px){[_nghost-%COMP%]{width:100%}}.container[_ngcontent-%COMP%]{max-width:1440px;margin:0 auto;padding:0 40px;display:grid;grid-template-columns:repeat(12,1fr)}@media (min-width: 450px) and (max-width: 767px){.container[_ngcontent-%COMP%]{padding:0 20px}}@media (min-width: 320px) and (max-width: 449px){.container[_ngcontent-%COMP%]{padding:0 5px;grid-column:1/13}}.spinner-container[_ngcontent-%COMP%]{grid-column:6/8;text-align:center}.buttons-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px}@media (min-width: 450px) and (max-width: 767px){.buttons-container[_ngcontent-%COMP%]{flex-wrap:wrap}}@media (min-width: 320px) and (max-width: 449px){.buttons-container[_ngcontent-%COMP%]{flex-wrap:wrap}}.edit-user-header[_ngcontent-%COMP%]{grid-column:5/9;margin:20px 0}@media (min-width: 992px) and (max-width: 1440px){.edit-user-header[_ngcontent-%COMP%]{grid-column:4/10}}@media (min-width: 768px) and (max-width: 991px){.edit-user-header[_ngcontent-%COMP%]{grid-column:3/11}}@media (min-width: 532px) and (max-width: 767px){.edit-user-header[_ngcontent-%COMP%]{grid-column:2/12}}@media (min-width: 320px) and (max-width: 532px){.edit-user-header[_ngcontent-%COMP%]{grid-column:1/13}}.edit-form[_ngcontent-%COMP%]{grid-column:5/9;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:20px;border:1px solid rgb(103,58,183);border-radius:5px;margin-bottom:20px}.edit-form[_ngcontent-%COMP%]   .edit-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.edit-form[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{width:100%}.edit-form[_ngcontent-%COMP%]   .password-field[_ngcontent-%COMP%]{margin-bottom:50px}.edit-form[_ngcontent-%COMP%]   .color-field-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:nowrap;justify-content:space-between}.edit-form[_ngcontent-%COMP%]   .color-field[_ngcontent-%COMP%]{flex-basis:70%;margin-right:10px;flex-shrink:1}@media (min-width: 320px) and (max-width: 430px){.edit-form[_ngcontent-%COMP%]   .color-field[_ngcontent-%COMP%]{width:50%}}.edit-form[_ngcontent-%COMP%]   .avatar-preview[_ngcontent-%COMP%]{border-radius:50%;display:flex;justify-content:center;align-items:center;font-family:Raleway,sans-serif;font-size:25px;font-weight:500;letter-spacing:1.2px;color:#fff;width:80px;height:80px;flex-shrink:0}@media (min-width: 320px) and (max-width: 430px){.edit-form[_ngcontent-%COMP%]   .avatar-preview[_ngcontent-%COMP%]{width:50px;height:50px}}.edit-form[_ngcontent-%COMP%]   .avatar-initials[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center}.edit-form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex-basis:100%;align-self:flex-start}@media (min-width: 320px) and (max-width: 449px){.edit-form[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:0 5px}}.edit-form[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#673ab7}.edit-form[_ngcontent-%COMP%]   .err-span[_ngcontent-%COMP%]{color:#f44336}.edit-form[_ngcontent-%COMP%]   .danger-btn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}@media (min-width: 992px) and (max-width: 1440px){.edit-form[_ngcontent-%COMP%]{grid-column:4/10}}@media (min-width: 768px) and (max-width: 991px){.edit-form[_ngcontent-%COMP%]{grid-column:3/11}}@media (min-width: 532px) and (max-width: 767px){.edit-form[_ngcontent-%COMP%]{grid-column:2/12;padding:10px}}@media (min-width: 320px) and (max-width: 532px){.edit-form[_ngcontent-%COMP%]{grid-column:1/13;padding:10px}}"]}),e})(),canActivate:[C.f]}];let et=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(tt),h.Bz]}),e})();var rt=o(4466);let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.ez,rt.m,et,i.u5,i.UX,Z.JF]}),e})()}}]);